<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="xterm.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <nav>
        <button
          @click="{{showOverview()}}"
          :class="{selected: view === 'overview'}"
        >
          Overview
        </button>
        <button
          v-for="slot in slots"
          @click="{{slot.select()}}"
          class="led"
          :class="{error: !slot.ok, dark: !slot.hasCard, green: slot.powered, selected: slot.selected}"
        >
          <span>{{slot.label}}</span>
        </button>
      </nav>
      <main>
        <div id="overview" v-show="!slot">
          <div class="panel">
            <div class="widget">
              <div class="measurement">{{overview.U.toFixed(1)}} V</div>
            </div>
            <div class="widget">
              <div class="measurement">{{overview.I.toFixed(3)}} A</div>
            </div>
            <div class="widget">
              <div class="measurement">{{overview.P.toFixed(1)}} W</div>
            </div>
          </div>
          <div>
            <select v-model="fans.speed" @change="fansSpeedChange()">
              <option v-for="speed in fans.speeds" :value="speed.value">
                {{speed.label}}
              </option>
            </select>
          </div>
        </div>
        <div class="slot" v-if="slot">
          <input class="label" v-model="slot.label" />
          <div class="panel">
            <div class="widget">
              <button
                class="toggle led green"
                :class="{on: slot.powered}"
                :disabled="!slot.hasCard || slot.id === 0"
                @click="{{slot.powerToggle()}}"
              >
                <span>Power</span>
              </button>
            </div>
            <div class="widget">
              <div class="measurement">{{slot.U.toFixed(1)}} V</div>
            </div>
            <div class="widget">
              <div class="measurement">{{slot.I.toFixed(3)}} A</div>
            </div>
            <div class="widget">
              <div class="measurement">{{slot.P.toFixed(1)}} W</div>
            </div>
            <div class="widget">
              <div class="measurement">{{slot.T.toFixed(0)}} Â°C</div>
            </div>
            <div class="widget">
              <button class="toggle led orange">togLed</button>
            </div>
          </div>
        </div>
        <div id="terminal" v-show="slot"></div>
      </main>
    </div>
    <!-- <template id="template-slot">
        <div class="slot">
          <input class="label" />
          <div class="panel">
            <div class="widget">
              <button class="power slot-id-needed toggle led green">
                Power
              </button>
            </div>
            <div class="widget">
              <div class="measurement"><span class="U">0</span> V</div>
            </div>
            <div class="widget">
              <div class="measurement"><span class="I">0</span> A</div>
            </div>
            <div class="widget">
              <div class="measurement"><span class="P">0</span> W</div>
            </div>
            <div class="widget">
              <button class="toggle led orange">togLed</button>
            </div>
          </div>
        </div>
      </template> -->
    <script src="vue.min.js"></script>
    <script src="jquery-3.6.0.min.js"></script>
    <script src="xterm.js"></script>
    <script src="socket.io/socket.io.js"></script>
    <script src="main.js"></script>
  </body>
</html>
